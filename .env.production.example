# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env.production and update with your production values
# Then transfer to the Oracle instance
#
# WARNING: Never commit .env.production to git. Use GitHub Secrets instead.
# ============================================================================

# ============================================================================
# NODE ENVIRONMENT
# ============================================================================
NODE_ENV=production

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Host: 'db' for Docker internal, or external IP for remote DB
DATABASE_URL=postgresql://sardinha:sardinha123@db:5432/investia_db?schema=public

# Test database (only used during CI/CD)
DATABASE_URL_TEST=postgresql://sardinha:sardinha123@localhost:5432/investia_test_db?schema=public

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-here-change-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# ============================================================================
# EXTERNAL APIs
# ============================================================================
# BRAPI - Market data (optional, has rate limit without token)
BRAPI_TOKEN=

# OpenAI - For LLM-based rule extraction
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# Google Gemini - Fallback LLM provider
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-flash

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================
# SendGrid or similar email service
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@investia.com.br

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
# Set to your public Oracle IP or domain
NEXT_PUBLIC_API_URL=http://141.148.139.27:3001

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=warn
SENTRY_DSN=

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# CORS & SECURITY
# ============================================================================
# Comma-separated list of allowed origins (no spaces)
CORS_ORIGINS=https://your-domain.com,https://investcopilot.vercel.app
ALLOW_INSECURE_TLS=false

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Enable/disable features per environment
FEATURE_DIVIDENDS_ENABLED=true
FEATURE_FAIR_PRICE_ENABLED=true
FEATURE_RANKING_ENABLED=true
FEATURE_WALLETS_ENABLED=true

# ============================================================================
# PERFORMANCE & MONITORING
# ============================================================================
# Memory limits for Node.js
NODE_OPTIONS=--max-old-space-size=400

# Max body size for API requests
MAX_BODY_SIZE=50mb

# ============================================================================
# BACKUP & PERSISTENCE
# ============================================================================
# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# Retention policy (in days)
BACKUP_RETENTION_DAYS=30

# ============================================================================
# SECURITY HEADERS
# ============================================================================
ENABLE_HELMET=true
ENABLE_CSRF=true
ENABLE_HTTPONLY_COOKIES=true
